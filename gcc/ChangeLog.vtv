2013-06-16  Caroline Tice  <cmtice@google.com>

	gcc
	* common.opt: (fvtable-verify=): New option. Also define vtv_priority
	values for the option.
	* config/gnu-user.h: Add vtv_start.o to STARTFILE_SPEC if
	fvtable-verify is present; Add vtv_end.o to ENDFILE_SPEC if
	fvtable-verify is present.
	* flag-types.h (vtv_priority):  New enum, for values for new
	* tree-pass.h (pass_vtable_verify): Declare new pass.
	* output.h (assemble_vtv_preinit_initializer):  External function decl.
	* passes.c (init_optimization_pass): Add pass_vtable_verify.
	* timevar.def (TV_VTABLE_VERIFICATION):  Declare new time var.
	* tree.h: Add extern function declaration for save_vtable_map_decl.
	'-fvtable-verify=' option.
	* varasm.c (assemble_variable): Add code for handling variables that
	go into the ".vtable_map_vars" section.
	(assemble_vtv_perinit_initializer):  New function.
	(default_section_type_flags):  Add SECTION_LINKONCE to
	".vtable_map_vars" section items.
	* vtable-verify.c:  New file, contains vtable verification tree
	pass.
	* vtable-verify.h: New file.

	* Makefile.in (OBJS):  Add vtable-verify.o to list of object
	files.
	(vtable-verify.o):  Add rule for building object file.
	(GTFILES): Add vtable-verify.c to list of files that use GCC's
	garbage collector.

